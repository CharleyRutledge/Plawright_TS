# Playwright TypeScript Test Automation Framework

A comprehensive test automation framework built with Playwright and TypeScript, featuring best practices and modern testing patterns.

## Features

- **AI-Powered Agents**: Built-in planner, generator, and healer agents for automated test creation and maintenance
- **Cross-Browser Testing**: Chromium, Firefox, and WebKit support
- **Mobile Testing**: Pre-configured mobile device emulation
- **Page Object Model**: Organized and maintainable test structure
- **API Testing**: Built-in API testing capabilities
- **Visual Regression**: Screenshot comparison testing
- **Network Mocking**: Mock and intercept network requests
- **Custom Fixtures**: Reusable test setup and utilities
- **Comprehensive Reporting**: HTML, JSON, and JUnit reports
- **CI/CD Ready**: Optimized for continuous integration

## Project Structure

```
Playwright_TS_Starter/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ chatmodes/             # AI Agent definitions
â”‚   â”‚   â”œâ”€â”€ ðŸŽ­ planner.chatmode.md
â”‚   â”‚   â”œâ”€â”€ ðŸŽ­ generator.chatmode.md
â”‚   â”‚   â””â”€â”€ ðŸŽ­ healer.chatmode.md
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ playwright.yml      # CI/CD pipeline
â”œâ”€â”€ .vscode/                    # VS Code settings
â”‚   â”œâ”€â”€ mcp.json               # MCP server config for agents
â”‚   â”œâ”€â”€ settings.json
â”‚   â””â”€â”€ extensions.json
â”œâ”€â”€ specs/                      # Test plans (generated by planner agent)
â”‚   â””â”€â”€ example-test-plan.md
â”œâ”€â”€ tests/                      # Test files
â”‚   â”œâ”€â”€ example.spec.ts        # Example test
â”‚   â”œâ”€â”€ seed.spec.ts           # Seed test for AI agents
â”‚   â”œâ”€â”€ pages/                 # Page Object Models
â”‚   â”‚   â”œâ”€â”€ BasePage.ts
â”‚   â”‚   â””â”€â”€ HomePage.ts
â”‚   â”œâ”€â”€ fixtures/              # Custom fixtures and setup
â”‚   â”‚   â”œâ”€â”€ customFixtures.ts
â”‚   â”‚   â”œâ”€â”€ testData.ts
â”‚   â”‚   â”œâ”€â”€ authentication.setup.ts
â”‚   â”‚   â”œâ”€â”€ global.setup.ts
â”‚   â”‚   â””â”€â”€ global.teardown.ts
â”‚   â””â”€â”€ utils/                 # Helper functions
â”‚       â””â”€â”€ helpers.ts
â”œâ”€â”€ test-results/              # Test execution artifacts
â”œâ”€â”€ playwright-report/         # HTML test reports
â”œâ”€â”€ playwright.config.ts       # Playwright configuration
â”œâ”€â”€ tsconfig.json             # TypeScript configuration
â”œâ”€â”€ package.json              # Project dependencies
â”œâ”€â”€ Dockerfile                # Docker configuration
â”œâ”€â”€ README.md                 # This file
â”œâ”€â”€ QUICKSTART.md             # Quick start guide
â”œâ”€â”€ AGENTS.md                 # AI Agents guide
â””â”€â”€ CONTRIBUTING.md           # Contribution guidelines

```

## Prerequisites

- Node.js (v18 or higher)
- npm or yarn package manager

## Installation

1. **Install dependencies:**

```bash
npm install
```

2. **Install Playwright browsers:**

```bash
npx playwright install
```

Or install with system dependencies:

```bash
npx playwright install --with-deps
```

## Running Tests

### Run all tests
```bash
npm test
```

### Run tests in headed mode (see browser)
```bash
npm run test:headed
```

### Run tests in debug mode
```bash
npm run test:debug
```

### Run tests in UI mode (interactive)
```bash
npm run test:ui
```

### Run tests for specific browser
```bash
npm run test:chromium
npm run test:firefox
npm run test:webkit
```

### Run mobile tests
```bash
npm run test:mobile
```

### Run specific test file
```bash
npx playwright test tests/example.spec.ts
```

### Run tests with specific tag
```bash
npx playwright test --grep @smoke
```

## Viewing Reports

After test execution, view the HTML report:

```bash
npm run report
```

## AI-Powered Test Generation

### Playwright Agents

This project includes three AI agents for automated test creation and maintenance:

- **ðŸŽ­ Planner** - Explores your app and creates test plans
- **ðŸŽ­ Generator** - Converts test plans into Playwright tests  
- **ðŸŽ­ Healer** - Automatically fixes failing tests

**Quick Start with Agents:**

1. Open VS Code (v1.105+ required)
2. Open VS Code chat
3. Select the agent mode (planner/generator/healer)
4. Give commands like:
   - "Generate a test plan for user login"
   - "Create tests from specs/login-flow.md"
   - "Heal the failing checkout test"

See [AGENTS.md](./AGENTS.md) for detailed guide.

### Manual Code Generation

Generate tests using Playwright's codegen tool:

```bash
npm run codegen
```

Or generate tests for a specific URL:

```bash
npx playwright codegen https://example.com
```

## Configuration

### Environment Variables

Create a `.env` file based on the configuration needs:

```env
BASE_URL=https://your-app-url.com
TEST_USERNAME=your-username
TEST_PASSWORD=your-password
```

### Playwright Configuration

The `playwright.config.ts` file contains all test configurations:

- **Test directory**: `./tests`
- **Parallel execution**: Enabled
- **Retries**: 2 on CI, 0 locally
- **Reporters**: HTML, List, JSON, JUnit
- **Timeout**: 30 seconds per test
- **Screenshots**: On failure
- **Videos**: Retained on failure
- **Traces**: On first retry

### TypeScript Configuration

The `tsconfig.json` includes path aliases for cleaner imports:

- `@pages/*` - Page objects
- `@fixtures/*` - Custom fixtures
- `@utils/*` - Helper utilities

## Writing Tests

### Basic Test Example

```typescript
import { test, expect } from '@playwright/test';

test('basic test', async ({ page }) => {
  await page.goto('/');
  await expect(page).toHaveTitle(/Expected Title/);
});
```

### Using Page Object Model

```typescript
import { test, expect } from '@playwright/test';
import { HomePage } from './pages/HomePage';

test('POM example', async ({ page }) => {
  const homePage = new HomePage(page);
  await homePage.navigate();
  await homePage.clickGetStarted();
});
```

### Using Custom Fixtures

```typescript
import { test, expect } from './fixtures/customFixtures';

test('custom fixture example', async ({ homePage }) => {
  await homePage.navigate();
  await expect(await homePage.getTitle()).toContain('Playwright');
});
```

## Best Practices

1. **Use Page Object Model** for maintainable tests
2. **Leverage built-in locators** (getByRole, getByText, etc.)
3. **Auto-waiting**: Playwright automatically waits for elements
4. **Use soft assertions** when checking multiple conditions
5. **Group related tests** using `test.describe()`
6. **Use fixtures** for reusable setup code
7. **Keep tests independent** - each test should be able to run alone
8. **Use meaningful test names** that describe the scenario

## CI/CD Integration

### GitHub Actions Example

```yaml
name: Playwright Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 18
      - run: npm ci
      - run: npx playwright install --with-deps
      - run: npm test
      - uses: actions/upload-artifact@v4
        if: always()
        with:
          name: playwright-report
          path: playwright-report/
```

## Troubleshooting

### Browser installation issues
```bash
npx playwright install --force
```

### Clear test results
```bash
rm -rf test-results playwright-report
```

### Update Playwright
```bash
npm install @playwright/test@latest
npx playwright install
```

## Resources

- [Playwright Documentation](https://playwright.dev/docs/intro)
- [Playwright Agents Guide](https://playwright.dev/docs/test-agents)
- [Playwright API Reference](https://playwright.dev/docs/api/class-playwright)
- [Best Practices](https://playwright.dev/docs/best-practices)
- [Examples](https://playwright.dev/docs/examples)
- [AI Agents Guide (Local)](./AGENTS.md)

## License

MIT
